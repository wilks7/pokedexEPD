<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Pokemon</title>
</head>
<body>
    <form action="/pokedex" method="post">
        <!-- Generation Dropdown -->
        <label for="generation">Generation:</label>
        <select id="generation" name="generation" onchange="updateFormOptions()">
            {% for gen_num, gen_data in generations.items() %}
                <option value="{{ gen_num }}">{{ gen_data['title'] }}</option>
            {% endfor %}
        </select><br><br>
    
        <!-- Pokemon Number Dropdown -->
        <label for="pokemon_number">Pokemon Number:</label>
        <select id="pokemon_number" name="pokemon_number">
            <!-- Options will be populated dynamically based on the selected generation -->
        </select><br><br>
    
        <!-- Version Dropdown -->
        <label for="version">Version:</label>
        <select id="version" name="version">
            <!-- Options will be populated dynamically based on the selected generation -->
        </select><br><br>
    
        <input type="submit" value="Display Pokemon">
    </form>
    

    <!-- Optional JavaScript to dynamically update form options based on selected generation -->
    <script>
        function updateFormOptions() {
            // Get the selected generation
            let selectedGen = document.getElementById('generation').value;

            // Update the Pokemon Number dropdown based on the selected generation
            let selectedGenData = GENERATIONS[selectedGen];
            let pokemonDropdown = document.getElementById('pokemon_number');
            pokemonDropdown.innerHTML = ""; // Clear current options
            for(let i = selectedGenData.range[0]; i <= selectedGenData.range[1]; i++) {
                let option = document.createElement('option');
                option.value = i;
                option.text = i;
                pokemonDropdown.add(option);
            }

            // Update the Version dropdown based on the selected generation
            let versionDropdown = document.getElementById('version');
            versionDropdown.innerHTML = ""; // Clear current options
            selectedGenData.versions.forEach(version => {
                let option = document.createElement('option');
                option.value = version;
                option.text = version.replace("-", " ").charAt(0).toUpperCase() + version.replace("-", " ").slice(1); // Format "red-blue" as "Red Blue"
                versionDropdown.add(option);
            });
        }
        window.onload = updateFormOptions;
    </script>
</body>
</html>
